@if (pageLoading()) {
  <div class="spinner-border position-absolute" role="status" id="spinner">
    <span class="visually-hidden">Loading...</span>
  </div>
} @else {
  <a routerLink="/" class="btn btn-link p-0 mb-3">‚Üê Back</a>
  <div *ngIf="bunny() as b">
    <h3 class="mb-3">{{ b.name }}</h3>

    <div class="row g-3 mb-4">
      <div class="col-md-3">
        <div class="card p-3">
          <div class="text-muted">Happiness</div>
          <div class="fs-3 fw-bold">{{ b.happiness }}</div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <div class="text-muted mb-1">Carrots eaten</div>
          <div class="d-flex align-items-center gap-2">
            <span class="fs-5">{{ b.carrotsEaten }}</span>
            <button class="btn btn-sm btn-primary increment-button" (click)="increment('INC_CARROT_EATEN')" [disabled]="carrotsLoading()">
              @if (carrotsLoading()) {
                <div class="spinner-border spinner-border-sm" role="status" id="spinner">
                  <span class="visually-hidden">Loading...</span>
                </div>
              } @else {
                +1
              }
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <div class="text-muted mb-1">Lettuce eaten</div>
          <div class="d-flex align-items-center gap-2">
            <span class="fs-5">{{ b.lettuceEaten }}</span>
            <button class="btn btn-sm btn-primary increment-button" (click)="increment('INC_LETTUCE_EATEN')" [disabled]="lettuceLoading()">
              @if (lettuceLoading()) {
                <div class="spinner-border spinner-border-sm" role="status" id="spinner">
                  <span class="visually-hidden">Loading...</span>
                </div>
              } @else {
                +1
              }
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <div class="text-muted mb-1">Play dates</div>
          <div class="d-flex align-items-center gap-2">
            <span class="fs-5">{{ b.playDatesHad }}</span>
          </div>
        </div>
      </div>
    </div>

    <form class="row g-2 align-items-end" (ngSubmit)="recordPlayDate()">
      <div class="col-auto">
        <label class="form-label d-block">Play with</label>
        <select class="form-select" [(ngModel)]="selectedFriendId" name="friend">
          <option value="" disabled selected>Select bunny</option>
          <option *ngFor="let other of otherBunnies()" [value]="other.id">{{ other.name }}</option>
        </select>
      </div>
      <div class="col-auto">
        <button class="btn btn-secondary" type="submit" [disabled]="!selectedFriendId">Record play date</button>
      </div>
    </form>
  </div>

  <div *ngIf="!bunny()">
    <h1>No bunny found.</h1>
  </div>
}